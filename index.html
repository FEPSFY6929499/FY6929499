<!DOCTYPE html>
<html>
<head>
  <title>Conference Paper: Aerodynamics of a Helicopter</title>
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
</head>
<body>
  <img src="WebBanner2023.png" alt="banner" width="900" height="300">
  <h1><b>ENG0018 Computer Laboratory 2025/26</b></h1>
  <h2>Student URN: 6929499</h2>
  <hr>
  <h2 style="font-family:calibri;"><b>Conference paper: Aerodynamics of a Helicopter</b></h2>
  <hr>

  <h3 id="Introduction">Introduction</h3>
  <pre id="Introduction_InText"> ... your text ... </pre>

  <h3 id="Analysis and discussion">Analysis and discussion</h3>
  <p id="Analysis_InText"> ... your text ... </p>

  <p id="totalWordCount"></p>
  <hr>

  <div id="last-updated">Loading last update time...</div>
  <button onclick="verifyLastUpdatedTime()">Verify Last Modified Time</button>

  <script>
    const username = "FEPSFY6929499";
    const repo = "FY6929499";

    async function getLastUpdatedTime() {
      const url = `https://api.github.com/repos/${username}/${repo}/commits`;
      try {
        const response = await fetch(url, {
          method: 'GET',
          headers: { 'Accept': 'application/vnd.github.v3+json' }
        });
        if (!response.ok) {
          throw new Error(`Error fetching data: ${response.status} - ${response.statusText}`);
        }
        const commits = await response.json();
        if (commits && commits.length > 0) {
          const lastCommitDate = new Date(commits[0].commit.committer.date);
          document.getElementById('last-updated').innerText =
            `Last Modified Time: ${lastCommitDate.toLocaleString()}`;
        } else {
          document.getElementById('last-updated').innerText = 'No commits found in the repository.';
        }
      } catch (error) {
        document.getElementById('last-updated').innerText =
          'Error fetching update time. Please check the repository details.';
      }
    }

    async function verifyLastUpdatedTime() {
      document.getElementById('last-updated').innerText = 'Verifying...';
      await getLastUpdatedTime();
      alert("Last modified time has been successfully verified from GitHub API.");
    }

    function displayWordCount(sectionId) {
      const text = document.getElementById(sectionId).textContent;
      const wordArray = text.trim().split(/\s+/);
      return wordArray.length;
    }

    function displayTotalWordCount() {
      const IntroductionCount = displayWordCount("Introduction_InText");
      const AnalysisCount = displayWordCount("Analysis_InText");
      const totalWordCount = IntroductionCount + AnalysisCount;
      document.getElementById("totalWordCount").innerText =
        `Total word count: ${totalWordCount}`;
    }

    window.onload = function() {
      getLastUpdatedTime();
      displayTotalWordCount();
    };
  </script>
</body>
</html>
